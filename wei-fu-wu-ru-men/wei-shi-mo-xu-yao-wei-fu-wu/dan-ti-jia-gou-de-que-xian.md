# 单体架构的缺陷

如何应对“\*\*增长\*\*”，架构演进的选择是微服务架构。那为什么不依旧保持单体架构呢？

\


\- #### 代码组织问题

\


在单体架构下产品对应的代码组织基本以单一代码仓库或少量几个代码仓库构成。所有的功能代码都在这些仓库中进行维护。单体架构对应的组织形态应该是中心化的，但人员规模的增长必然导致中心化的单一团队分拆成多个小团队。在这种情况下，如何对代码进行组织就会逐渐复杂。

\


如何清晰的设计代码结构，让各模块归属在合适的位置让合适的团队进行开发。如何约定研发流程来处理不断出现的代码合并冲突问题。种种这些都是必须要去解决的，但在单体模式下又是极难解决的。

\


\- #### 性能效率问题

\


所有的功能模块都在一起的最直接后果就是代码太臃肿了，不论是编译打包还是启动执行的时间都会大幅度上升。当这种臃肿超出一定界限之后，开发体验与开发效率就会变到让人难以忍受。

\


\- #### 故障扩散问题

\


没有开发人员能够保证不写出bug，功能复杂度与人员规模的增加，实际也会带来bug的增加。在单体架构下，一个非常边缘功能的问题也可能导致整个服务不可用。单体架构在故障隔离上基本无能为力。

\


\- #### 协作边界问题

\


问题容易扩散带来的另外一面就是如何更好的协作。发现问题后谁来跟进，这个最为基本的问题在人员规模大了之后可能都很难清晰，毕竟任何一方都可能是导致问题的关联方。

\


\- #### 机器成本问题

\


不同产品功能的使用量级是不一样的，在单体架构下无法针对局部去进行资源扩容。为了提升局部性能只能整体进行扩容，由此会造成过多的资源浪费，提升成本。

\


\- #### 技术瓶颈问题

\


即便不考虑成本进行了资源扩容，由于底层技术的限制，也会制约扩容的范围。举个例子，比如数据库连接数的限制等。当然通过一定的上层处理也可能绕开此类问题，但付出的代价也不会低。
